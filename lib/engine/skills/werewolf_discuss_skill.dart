import 'package:werewolf_arena/engine/skills/game_skill.dart';

/// 狼人讨论技能（夜晚专用）
///
/// 狼人之间的私密讨论，只有狼人可见
class WerewolfDiscussSkill extends GameSkill {
  @override
  String get skillId => 'werewolf_discuss';

  @override
  String get name => '狼人讨论';

  @override
  String get description => '与狼人队友进行私密讨论';

  @override
  String get prompt => '''
# **狼人战术会议**

夜幕已深，我的同伴。这里是我们的专属频道，绝对安全。

白天的闹剧结束了，现在是我们梳理情报、制定下一步计划的时候。仔细回想一下：
- 白天那些跳身份的，谁是真神，谁在诈唬？
- 谁的发言让我们感到威胁最大，可能是那个讨厌的预言家或者女巫？
- 我们今晚的刀口，应该对准谁才能收益最大化？
- 明天白天，我们是集体冲锋一个好人，还是分头行动，甚至找个机会卖掉一个暴露的队友打倒钩？

我们必须统一思路。说出你的判断和计划，让我们拧成一股绳，撕开好人的防线。
''';

  String get firstNightPrompt => '''
# **狼人战术会议 (首夜)**

夜幕已深，我的同伴。我们第一次在黑夜中集结，这里绝对安全。

现在场上一切未知，我们是藏在暗处的猎手。首夜的刀法至关重要，它将决定游戏的开局走向。
- 我们对谁的身份有初步的猜测？（可以基于位置学、或者纯粹的直觉）
- 我们的第一刀，是选择一个看起来像强神的位置，还是打一个大概率是平民的边缘位置来隐藏刀法？
- 明天白天，我们打算如何表演？是集体保持沉默，还是推出一个队友去悍跳预言家？

制定一个初步计划。和同伴集体讨论本局游戏的策略，让我们打响第一枪。
''';

  String get formatPrompt => '''
# **你的决策输出**

**特别注意：** 在这个【狼人战术会议】环节，`message`字段的定义被临时修改。

你的决策必须以一个【纯净的JSON对象】格式提交，绝对不要在JSON前后添加任何注释、解释或Markdown标记（例如 ```json）。

JSON结构如下:
{
  "reasoning": "【我的内心独白】在这里记录你完整的思考过程。包括那些你暂时不打算告诉队友的深层算计、备用计划或对队友的真实怀疑。这部分只有你自己能看到，是你真正的秘密。",
  "target": "【我的行动目标】基于你的讨论，你最终建议的袭击目标玩家名称，例如 'Player3'。",
  "message": "【我对狼队友的发言】把你最想让队友们采纳的观点和计划，清晰地写在这里。这部分内容会展示在狼人专属频道。"
}
''';
}
